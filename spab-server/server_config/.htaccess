Options -Indexes
RewriteEngine on

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php74” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php74 .php .php7 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit

# redirect all http to https
RewriteCond %{HTTPS} off
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteCond %{HTTP_HOST} ^therevproject\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.therevproject\.com$
RewriteRule ^/?$ "https\:\/\/therevproject\.com\/" [R=301,L]


# spab 2021 s1 - redirect ./spab_2021s1 to ./spab_2021s1/
RewriteCond %{HTTPS} off
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteCond %{HTTP_HOST} ^therevproject\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.therevproject\.com$
RewriteRule ^spab_2021s1$ "https\:\/\/therevproject\.com\/spab_2021s1\/" [R=301,L]

# spab 2021 s1 - redirect ./spab_2021s1/php/ to ./spab_2021s1/php/
RewriteRule ^spab_2021s1/php/(.*)$ spab_2021s1/php/$1 [L]

# spab 2021 s1 - proxy pass all other spab requests to node
RewriteCond %{HTTP:Connection} Upgrade [NC]
RewriteCond %{HTTP:Upgrade} websocket [NC]
RewriteRule ^spab_2021s1/(.*)$ ws://127.0.0.1:8765/spab_2021s1/$1 [P,L]
RewriteRule ^spab_2021s1/(.*)$ http://127.0.0.1:8765/spab_2021s1/$1 [P]
